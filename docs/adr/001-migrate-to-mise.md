# ADR 001: asdfからmiseへの移行

## ステータス

採択済み (2026-01-22)

## 背景

このプロジェクトでは、開発環境のバージョン管理ツールとして`asdf`を使用していました。しかし、より高速で機能豊富な後継ツールである`mise`が登場し、移行を検討することになりました。

## 決定

`asdf`から`mise`（旧名: rtx）へバージョン管理ツールを移行する。

## 理由

### miseの利点

1. **パフォーマンスの向上**
   - Rustで実装されており、asdfよりも35倍以上高速
   - シェルの起動時間が大幅に短縮される
   - プロジェクト間の切り替えが瞬時に行われる

2. **asdfとの互換性**
   - `.tool-versions`ファイルを読み込める（後方互換性）
   - asdfプラグインがそのまま動作する
   - 段階的な移行が可能

3. **より優れた設定形式**
   - TOML形式（`.mise.toml`）による明確な設定
   - コメントやセクション分けが可能
   - 設定の可読性が向上

4. **追加機能**
   - タスクランナー機能（`mise run`）
   - 環境変数の管理（`.mise.toml`内で定義可能）
   - より詳細なバージョン指定（`latest`、`^1.20`など）
   - プラグインのインストールが不要（多くの言語を標準サポート）

5. **アクティブな開発**
   - 活発に開発されている（週次リリース）
   - モダンなコマンドラインインターフェース
   - 優れたドキュメント

### 移行の影響

**最小限の変更**
- `.tool-versions` → `.mise.toml`への変換のみ
- ドキュメントの更新
- 既存のワークフローへの影響なし

**開発者への影響**
- 初回のみ`mise`のインストールが必要
- インストール後は`mise install`で自動セットアップ
- コマンドはasdfとほぼ同じ

## 代替案

1. **asdfを継続使用**
   - 利点: 変更不要、既に動作している
   - 欠点: パフォーマンスが劣る、機能が限定的

2. **各言語の専用ツールを使用（goenv、nodenv等）**
   - 利点: 言語ごとに最適化されている
   - 欠点: 複数のツールを管理する必要がある

3. **Dockerのみに依存**
   - 利点: 環境の完全な統一
   - 欠点: ローカル開発での柔軟性が低い

## 結果

- より高速な開発環境の起動
- 将来的な拡張性の向上（タスクランナー機能等）
- モダンなツールチェーンの採用
- チーム全体の開発体験の改善

## 参考資料

- [mise公式ドキュメント](https://mise.jdx.dev/)
- [miseとasdfの比較](https://mise.jdx.dev/comparison-to-asdf.html)
- [mise GitHub Repository](https://github.com/jdx/mise)
