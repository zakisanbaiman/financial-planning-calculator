# 実装計画

- [x] 1. プロジェクト構造とコア設定の初期化
  - Next.jsプロジェクトの作成とTailwind CSS、TypeScriptの設定
  - Goプロジェクトの初期化とEcho、PostgreSQLドライバーの設定
  - OpenAPI仕様ファイルの作成とSwagger設定
  - _要件: 全体的なシステム基盤_

- [ ] 2. ドメイン層の実装
  - [x] 2.1 値オブジェクトの実装
    - Money、Rate、Periodなどの基本値オブジェクトを作成
    - バリデーションロジックと不変性を保証
    - _要件: 1.4, 2.4, 3.4, 4.4_

  - [x] 2.2 エンティティの実装
    - FinancialProfile、Goal、RetirementDataエンティティを作成
    - ドメインメソッドとビジネスルールを実装
    - _要件: 1.1, 1.2, 1.3, 3.1, 3.2, 6.1, 6.2_

  - [x] 2.3 集約とドメインサービスの実装
    - FinancialPlan集約ルートを作成
    - FinancialCalculationServiceとGoalRecommendationServiceを実装
    - _要件: 2.1, 2.2, 2.3, 3.3, 4.1, 4.2, 4.3_

  - [x] 2.4 ドメイン層の単体テスト
    - 値オブジェクト、エンティティ、ドメインサービスのテスト作成
    - ビジネスルールの正確性を検証
    - _要件: 全ドメインロジック_

- [ ] 3. データベース層の実装
  - [x] 3.1 PostgreSQLスキーマ設計と作成
    - テーブル設計とマイグレーションスクリプト作成
    - インデックスと制約の設定
    - _要件: 1.1, 1.2, 1.3, 3.1, 3.2, 6.1, 6.2_

  - [x] 3.2 リポジトリ実装
    - FinancialPlanRepository、GoalRepositoryの具象実装
    - CRUD操作とクエリ最適化
    - _要件: 1.1, 1.2, 1.3, 6.1, 6.2, 6.3_

  - [x] 3.3 データベース統合テスト
    - リポジトリの動作確認とデータ整合性テスト
    - パフォーマンステスト
    - _要件: データ永続化機能_

- [ ] 4. アプリケーション層の実装
  - [x] 4.1 ユースケースの実装
    - ManageFinancialDataUseCase、CalculateProjectionUseCaseを作成
    - ManageGoalsUseCase、GenerateReportsUseCaseを実装
    - _要件: 1.1, 1.2, 1.3, 2.1, 2.2, 2.3, 3.1, 3.2, 3.3, 4.1, 4.2, 4.3, 6.1, 6.2, 6.3_

  - [ ]* 4.2 アプリケーション層の単体テスト
    - ユースケースのテスト作成
    - モックを使用したテスト
    - _要件: アプリケーションロジック_

- [ ] 5. Web API層の実装
  - [x] 5.1 Echo Webサーバーとミドルウェア設定
    - CORS、ログ、エラーハンドリングミドルウェア設定
    - OpenAPI仕様に基づくルーティング設定
    - _要件: 全API機能_

  - [x] 5.2 コントローラーとハンドラーの実装
    - 財務データ管理API（POST, GET, PUT, DELETE /api/financial-data）
    - 計算API（POST /api/calculations/*）の実装
    - 目標管理API（POST, GET, PUT, DELETE /api/goals）の実装
    - _要件: 1.1, 1.2, 1.3, 2.1, 2.2, 2.3, 3.1, 3.2, 3.3, 4.1, 4.2, 4.3, 6.1, 6.2, 6.3_

  - [x] 5.3 バリデーションとエラーハンドリング
    - リクエストバリデーションの実装
    - 統一されたエラーレスポンス形式の実装
    - _要件: 1.4, 2.4, 3.4, 4.4_

  - [ ]* 5.4 API統合テスト
    - 各エンドポイントの動作確認
    - エラーケースのテスト
    - _要件: 全API機能_

- [ ] 6. フロントエンド基盤の実装
  - [ ] 6.1 Next.jsプロジェクト構造とルーティング
    - app/ディレクトリ構造の作成
    - レイアウトとページコンポーネントの基本実装
    - _要件: 5.1, 5.2, 5.3_

  - [ ] 6.2 共通コンポーネントライブラリ
    - InputField、Button、Modal、LoadingSpinnerコンポーネント作成
    - Tailwind CSSによるスタイリング
    - _要件: 5.1, 5.2, 5.3_

  - [ ] 6.3 状態管理とAPI通信
    - APIクライアントの実装
    - 状態管理（React Context/Zustand）の設定
    - _要件: 全フロントエンド機能_

- [ ] 7. 財務データ入力機能の実装
  - [ ] 7.1 財務情報入力フォーム
    - 月収、支出、貯蓄入力フォームの作成
    - リアルタイムバリデーションの実装
    - _要件: 1.1, 1.2, 1.3, 1.4_

  - [ ] 7.2 投資・インフレ設定フォーム
    - 投資利回り、インフレ率設定UI
    - 設定値の保存と読み込み機能
    - _要件: 2.2, 2.3_

  - [ ]* 7.3 入力フォームのテスト
    - フォームバリデーションのテスト
    - ユーザーインタラクションのテスト
    - _要件: 1.1, 1.2, 1.3, 1.4_

- [ ] 8. 計算・可視化機能の実装
  - [ ] 8.1 資産推移計算とグラフ表示
    - Chart.jsを使用した時系列グラフの実装
    - 複利計算結果の可視化
    - _要件: 2.1, 2.2, 2.3, 5.1, 5.2_

  - [ ] 8.2 老後資金計算機能
    - 退職年齢、生活費入力フォーム
    - 必要老後資金の計算と表示
    - _要件: 3.1, 3.2, 3.3, 5.1, 5.2_

  - [ ] 8.3 緊急資金計算機能
    - 緊急時期間設定と必要資金計算
    - 充足状況の可視化
    - _要件: 4.1, 4.2, 4.3, 5.1, 5.2_

- [ ] 9. 目標設定・進捗管理機能の実装
  - [ ] 9.1 目標設定フォーム
    - 目標種別、金額、期日設定UI
    - 目標の作成・編集・削除機能
    - _要件: 6.1, 6.2_

  - [ ] 9.2 進捗追跡とダッシュボード
    - 目標達成率の表示
    - プログレスバーとチャートによる可視化
    - _要件: 6.3, 5.1, 5.2, 5.3_

  - [ ] 9.3 推奨事項とアドバイス機能
    - 目標達成のための推奨貯蓄額計算
    - 代替案の提案機能
    - _要件: 6.4_

- [ ] 10. レポート生成機能の実装
  - [ ] 10.1 データ集計とレポート作成
    - 財務状況サマリーの生成
    - PDF形式でのレポート出力機能
    - _要件: 5.4_

  - [ ]* 10.2 レポート機能のテスト
    - PDF生成の動作確認
    - データ正確性の検証
    - _要件: 5.4_

- [ ] 11. 統合とデプロイメント準備
  - [ ] 11.1 フロントエンドとバックエンドの統合
    - API接続の確認と調整
    - エラーハンドリングの統合
    - _要件: 全システム機能_

  - [ ] 11.2 パフォーマンス最適化
    - フロントエンドの最適化（コード分割、画像最適化）
    - バックエンドの最適化（クエリ最適化、キャッシュ）
    - _要件: システム全体のパフォーマンス_

  - [ ]* 11.3 E2Eテスト
    - ユーザーシナリオの自動テスト
    - クロスブラウザテスト
    - _要件: 全システム機能_