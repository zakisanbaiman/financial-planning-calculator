# golangci-lint 設定

このプロジェクトでは `golangci-lint` を使用してコードの品質を保っています。

## バージョン

- **推奨**: golangci-lint v1.64.8以上
- **CI**: golangci-lint v1.61
- **設定ファイル**: `.golangci.yml` (v1形式)

## 設定

## 有効化されているLinter

- **errcheck**: エラーチェック漏れを検出
- **govet**: go vetの問題を検出
- **ineffassign**: 無効な代入を検出
- **staticcheck**: 静的解析
- **unused**: 未使用のコードを検出

## 除外ルール

以下のパターンは除外されています：

- `defer db.Close()` や `defer rows.Close()` のエラーチェック
- `defer tx.Rollback()` のエラーチェック
- テストファイル（`_test.go`）でのerrcheckとineffassign

## 使用方法

```bash
# Lintを実行
make lint

# または直接実行
golangci-lint run

# 自動修正可能な問題を修正
golangci-lint run --fix
```

## CI/CD

GitHub Actionsでlintが自動実行されます。

### ワークフロー

- **Lint** (`.github/workflows/lint.yml`)
  - プルリクエストとmainブランチへのpush時に実行
  - バックエンド: golangci-lintでコード品質をチェック
  - フロントエンド: ESLintと型チェックを実行

## インストール

```bash
# Homebrewの場合
brew install golangci-lint

# または特定のバージョン
brew install golangci-lint@1.64
```

**注意**: v2系は設定ファイルの形式が異なるため、v1系を使用してください。

## 参考リンク

- [golangci-lint公式ドキュメント](https://golangci-lint.run/)
- [利用可能なLinter一覧](https://golangci-lint.run/usage/linters/)
